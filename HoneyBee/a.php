<?php


$apikey_array = array();

$host = "localhost";
$username = "root";
$password = "";
$database = "tripchip2";

$conn = mysqli_connect($host, $username, $password, $database);


$query = "SELECT * FROM `running_days`";

$result = mysqli_query($conn, $query) or die("query failed");

while($record = mysqli_fetch_assoc($result)) {
    $train_number = $record['train_number'];
    
    $days = "";
    
    $dayData = json_decode($record['days'], true);
    
    foreach($dayData as $day) {
        if($day == "Y") {
            $days = $days."1";
        } else {
            $days = $days."0";
        }
    }
    
    $query = "UPDATE `running_days` SET `days` = '$days' WHERE `train_number` LIKE '$train_number'";
    mysqli_query($conn, $query)or die("Update failed");
    
}


//Error Stations ---------------------------------

//# 1108A, 1126A, 1125A, 1107A, 1767A, 1125A, 1107A, 1767A, 0866A, 1068A, 0865A,
//$data = ["01094","01151","01201","01224","01436","01450","02394","03126","03501","03507","03508","03511","03513","03557","04042","04051","04053","04113","04115","04804","04805","05028","05282","05286","05641","05711","05712","07126","07228","07405","07501","07505","07507","07509","08034","08576","09001","09002","09401","09407","09409","09411","09414","09419","09602","09603","09621","09624","09640","09720","09755","12119","15609","15610","15696","15813","15814","16041","16325","16326","18242","19405","19603","19606","19656","19772","19782","22211","52565","03517","03518","04403","05058","09627","14808","52563","52579","01028","01091","01493","03407","04010","04209","04222","04314","04503","04701","04727","04728","04732","04752","04803","04911","04918","05034","05281","05652","06013","06014","06316","06347","06504","06506","06535","06538","07092","07104","07213","07219","08293","08465","08471","08482","09023","09024","09025","09026","09035","09051","09052","09056","09260","09301","09460","09531","09561","09620","12494","12787","13013","13317","13318","13410","14308","14702","15693","15694","16322","16538","18236","19655","22002","51752","58865","00851","00852","04735","04931","07207","08243","08244","08245","08246","58871","74639","01013","01027","01033","01034","01047","01063","01065","01097","01203","01211","01701","02187","04032","04224","04504","04511","04512","04912","05103","05904","06004","06006","06008","06012","06016","06026","06037","06038","06039","06040","06042","06048","06049","06050","06052","06054","06056","06058","06060","06062","06065","06080","06102","06114","06116","06140","06235","06302","06304","06615","06617","06618","06619","06622","06748","06750","06802","06804","07201","07211","12527","12790","12794","14009","15106","15691","15692","16042","16221","16702","28242","58832","58838","02041","02423","02435","03124","03303","03686","04009","04022","04023","04024","04031","04035","04037","04041","04043","04056","04313","04853","05287","05289","05602","05606","05668","05903","05905","05914","05942","05946","05948","09742","12287","12288","12579","13244","13303","14010","14059","18241","22985","24033","83112","04932","09628","09706","12386","51118","52576","52580","01066","06055","06348","16865","16866","04644","07138","09030","09770","12564","05718","01102","01188","01454","02424","02436","02501","02993","03136","03502","03652","03685","04112","05023","05025","05027","05031","05033","05601","05640","05653","05672","05913","05945","05947","07150","09009","09416","09418","09451","15020","15105","19109","19110","22423","22424","23111","23112","25610","57624","05057","05609","05610","06335","06336","14605","14606","83131","01012","01032","01152","01494","02062","02778","02870","03059","03061","03063","03065","03067","03128","03130","05639","05697","05698","06505","07003","07005","07091","07105","07106","07109","07110","07115","07116","07125","07128","07137","07143","07165","07166","07202","08044","08047","08049","08462","08564","08612","08635","08637","09459","09532","09639","09733","12571","12572","12574","12585","12755","12756","12997","12998","17003","18601","18617","19105","19106","24034","59702","59724","59726","01652","02841","02863","04736","12385","17223","17224","09302","09305","09728","12529","12530","13251","13503","13504","19312","59307","15469","15470","15471","15472","15615","15616","01702","01711","02061","02188","02404","03651","04052","04054","04734","04751","04801","04802","04821","04822","04854","05589","08002","09021","09022","09033","09034","09036","09622","09707","09715","09719","09724","09727","09730","09736","09756","09769","13039","14060","14701","14703","14801","14802","15010","15284","18003","19771","19781","22986","53142","58840","58868","58870","59701","01656","02696","09705","14807","52551","01031","01216","01403","02449","02508","02517","02518","02520","02762","03113","03123","03125","03127","03129","03131","03135","03143","04806","05013","05650","05667","05671","05673","05674","06003","06005","06011","06025","06079","06315","07129","07144","07212","07606","08001","08632","09734","09801","09807","12575","12965","14019","14020","16327","16328","17004","19605","53141","57457","02005","02006","02510","05717","09805","01007","01020","01039","01040","01046","01057","01061","01067","01101","01187","01215","01301","02519","02702","02869","03062","04111","04116","04201","04203","04205","04221","04223","05014","05032","05649","08059","09408","09708","12233","12272","12528","12563","12745","12750","13111","13112","14704","15009","15695","19143","19144","22820","57140","01008","01035","01045","01058","01062","01064","01095","01096","02133","02403","02447","02455","02507","03289","04029","05213","05605","06001","06002","06009","06015","06019","06041","06044","06061","06063","06109","06113","06135","06201","06234","06236","06305","06503","06518","06667","06668","07131","07215","07221","07313","07605","08004","08042","08466","09010","09055","09402","09403","09404","09413","09415","09417","09420","09452","09533","12751","12753","12793","13409","14083","14084","16043","16107","16108","16222","16731","17049","17050","17687","18102","19025","24060","26629","29019","51446","52108","52110","07049","01014","01029","01089","01098","01223","01404","02448","02502","03060","03114","03144","03281","03408","04012","04030","04033","04055","04096","04202","04204","04206","05636","06043","06047","06053","06069","06301","06303","06537","06747","06917","06918","07118","07119","07120","07217","07218","07503","07613","07614","08510","08566","08611","09003","09004","09005","09006","09808","12120","12234","12271","12754","13421","13422","15019","16537","22001","22212","52101","52105","52107","58835","58837","58839","02504","04402","06136","07227","09562","01010","01011","01030","01038","01041","01042","01043","01044","01202","01435","01449","01453","01463","01464","01712","02393","02568","03066","03102","03211","03285","03288","03296","03512","04021","04038","05024","08008","08296","08461","08469","08470","08473","08481","09306","09410","09412","09572","09723","09729","12255","12576","12580","12743","12746","13243","15282","16044","16309","16310","18004","18413","18414","19311","19572","51445","01651","01655","08401","07214","07216","08570","08578","01036","03282","03283","04044","05285","06010","06020","06051","06233","08562","08624","08631","09571","09741","12493","12789","13014","13116","13252","13304","15109","16701","18618","19327","19571","23040","25715","51751","01009","01037","01302","02567","02802","02851","02852","03101","03295","04011","04723","04724","04731","04733","04917","05283","05509","05941","06064","06115","06202","06513","06551","06552","06553","06554","06803","07103","07111","07117","07127","07145","07148","07149","08003","08007","08033","08041","08043","08045","08055","08060","08301","08474","08568","08573","08623","09015","09221","09222","09716","09735","10001","10002","12573","12586","12744","12752","13115","15281","15283","16323","16324","18007","18008","19026","19305","19306","19604","23347","52564","04401","07050","07208","07320","08402","08502","74640","01068","02761","03284","06007","06023","06066","06317","06687","06745","06746","06749","06801","07406","07506","07508","08056","08103","08472","12543","12544","12653","12654","12757","12758","12788","12913","12914","16321","16732","16735","16736","17607","17608","52228","57458","57472","04034","04036","04114","04210","04522","04702","05510","07314","09108","09601","09802","12966","16529","16530","19328","19657","19658","57471","04404","07319","09806","03514","06059","06841","06842","07147","07315","07316","08046","08509","08561","08563","08565","08567","08569","08575","08577","12749","15110","22819","08501","16627","16628","02777","05026","06501","06502","06511","06512","06517","06536","06539","06540","06543","06544","06621","08048","08050","08302","08636","08638","09307","09308","09405","09406","12256","16669","16670","19406","02695","02864"];
//
//$data = array_unique($data);
//
//$file = fopen("error_routes.json", "a");
//
//fwrite($file, "[");
//foreach ($data as $dat) {
//    fwrite($file, '"'.$dat.'",');
//}
//fwrite($file, "]");
//fclose($file);
